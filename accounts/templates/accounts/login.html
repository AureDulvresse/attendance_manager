{% extends "login.html" %}
{% load static %}

{% block styles %}
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  integrity="sha384-...your-integrity-key..."
  crossorigin="anonymous"
/>
<style>
  .forget a {
    display: flex;
    align-items: flex-end;
    justify-content: flex-end;
    margin-top: 10px;
    color: black;
    text-decoration: underline;
  }

  .error-message {
    color: red;
    font-size: 14px;
    margin-top: 5px;
  }

  .error-box {
    color: white;
    background-color: #ff6f6f;
    border: 1px solid red;
    border-radius: 5px;
    padding: 10px;
    margin-bottom: 10px;
  }

  .input-field.error input {
    border-color: red;
  }

  .input-field.error i {
    color: red;
  }
</style>
{% endblock styles %}

{% block content %}
<div class="container">
  <div class="forms-container">
    <div class="signin-signup">
      <form
        action="{% url 'accounts:login' %}"
        class="sign-in-form"
        method="POST"
      >
        {% csrf_token %}
        <h2 class="title">Connectez-vous !</h2>

        <!-- Erreurs générales -->
        {% if form.non_field_errors %}
        <div class="error-box">
          <p>{{ form.non_field_errors }}</p>
        </div>
        {% endif %}

        <!-- Champ Username -->
         <div class="">
        <div class="input-field {% if form.username.errors %}error{% endif %}">
          <i class="fas fa-user"></i>
          <input
            type="text"
            name="username"
            placeholder="Username"
            value="{{ form.username.value|default:'' }}"
          />
          {% if form.username.errors %}
          <div class="error-message">
            {{ form.username.errors.0 }}
          </div>
          {% endif %}
        </div>
      </div>

        <!-- Champ Password -->
         <div class="">
        <div class="input-field {% if form.password.errors %}error{% endif %}">
          <i class="fas fa-lock"></i>
          <input
            type="password"
            name="password"
            placeholder="Password"
          />
          {% if form.password.errors %}
          <div class="error-message">
            {{ form.password.errors.0 }}
          </div>
          {% endif %}
        </div>
      </div>

        <div class="forget">
          <a href="{% url 'accounts:forgot_password' %}">Mot de passe oublié ?</a>
        </div>

        <input type="submit" value="Connexion" class="btn solid" />
      </form>
    </div>
  </div>

  <div class="panels-container bg-success">
    <div class="panel left-panel">
      <div class="content">
        <h2>Bienvenue sur l'application M4Concept</h2>
        <h5>
          Simplifiez la gestion de vos employés grâce à une plateforme
          centralisée pour l'enregistrement des employés, les absences, et le
          suivi. <br />
          Connectez-vous pour optimiser vos processus et favoriser l'efficacité
          au travail !
        </h5>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
